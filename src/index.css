@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════════
   iOS TEXT AUTOSIZING FIX — GLOBAL LOCK
   Prevents Safari from inflating font sizes in landscape or on larger viewports.
   Applied to html AND body for maximum coverage.
   ═══════════════════════════════════════════════════════════════════════════════ */
html,
body {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MOBILE MENU — EXPLICIT NAV TOKENS (LOCKED)
   
   These tokens are the ONLY source of truth for mobile navigation typography.
   They MUST be used in the mobile menu container. NO inheritance from page.
   
   Typography spec:
     Links: 16px / 24px, weight 450 (institutional)
     Buttons: 16px / 16px, weight 500
     Item gap: 22px
     CTA height: 52px, radius: 14px
   ═══════════════════════════════════════════════════════════════════════════════ */
:root {
  --nav-font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Text", "SF Pro Display", Inter, Arial, sans-serif;
  --nav-font-size: 16px;
  --nav-line-height: 24px;
  --nav-font-weight: 500;
  --nav-letter-spacing: normal;
  --nav-item-gap: 18px;
  --nav-divider: rgba(17,17,17,0.12);
  --nav-cta-height: 56px;
  --nav-cta-radius: 18px;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MOBILE MENU ROOT — HARD INHERITANCE RESET (PART A spec)
   
   Prevents ANY prose, heading, or responsive scaling from leaking in.
   -webkit-text-size-adjust: 100% is CRITICAL for iOS Safari.
   NO transform/scale on container or parents.
   ═══════════════════════════════════════════════════════════════════════════════ */
.mobile-menu-root {
  font-family: var(--nav-font-family) !important;
  font-size: 16px !important;
  line-height: 24px !important;
  font-weight: 500 !important;
  letter-spacing: normal !important;
  text-rendering: geometricPrecision !important;
  -webkit-text-size-adjust: 100% !important;
  text-size-adjust: 100% !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

/* Links — LOCKED at 16px/24px/500 (PART A spec) */
.mobile-menu-root .mobile-menu-link {
  display: flex;
  align-items: center;
  min-height: 60px;
  padding-top: 18px;
  padding-bottom: 18px;
  font-family: var(--nav-font-family) !important;
  font-size: 16px !important;
  line-height: 24px !important;
  font-weight: 500 !important;
  letter-spacing: normal !important;
  color: #111111 !important;
  text-decoration: none !important;
  text-transform: none !important;
  -webkit-text-size-adjust: 100% !important;
  text-size-adjust: 100% !important;
  transition: opacity 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.mobile-menu-root .mobile-menu-link:hover {
  opacity: 0.6;
}

/* Dividers — 1px solid rgba(17,17,17,0.12) (PART A spec) */
.mobile-menu-root .mobile-menu-divider {
  height: 1px;
  background: rgba(17,17,17,0.12);
}

/* Buttons — LOCKED at 16px/24px/600, 56px height, 18px radius (PART A spec) */
.mobile-menu-root .mobile-menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 56px !important;
  min-height: 56px !important;
  border-radius: 18px !important;
  font-family: var(--nav-font-family) !important;
  font-size: 16px !important;
  line-height: 24px !important;
  font-weight: 600 !important;
  letter-spacing: normal !important;
  text-decoration: none !important;
  text-transform: none !important;
  -webkit-text-size-adjust: 100% !important;
  text-size-adjust: 100% !important;
  transition: opacity 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.mobile-menu-root .mobile-menu-btn:hover {
  opacity: 0.85;
}

.mobile-menu-root .mobile-menu-btn-primary {
  background-color: #0B0F14 !important;
  color: #FFFFFF !important;
  border: none !important;
}

.mobile-menu-root .mobile-menu-btn-secondary {
  background-color: transparent !important;
  color: #111111 !important;
  border: 1px solid rgba(17,17,17,0.22) !important;
}

/* DEFENSIVE RESET — prevent ANY heading/prose inflation inside menu */
.mobile-menu-root *,
.mobile-menu-root *::before,
.mobile-menu-root *::after {
  font-family: inherit;
  text-transform: none;
}

.mobile-menu-root h1,
.mobile-menu-root h2,
.mobile-menu-root h3,
.mobile-menu-root h4,
.mobile-menu-root h5,
.mobile-menu-root h6,
.mobile-menu-root p,
.mobile-menu-root span {
  font-size: inherit !important;
  line-height: inherit !important;
  font-weight: inherit !important;
  letter-spacing: inherit !important;
  margin: 0 !important;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL SPACING SYSTEM — TRIBES STANDARD (LOCKED)

   Premium spacing tokens for Apple/Stripe/Mercury-level vertical rhythm.
   These tokens are authoritative and must be used consistently across all
   marketing pages, sections, and the footer.

   Usage:
   - Sections: Use --section-padding-* for consistent vertical rhythm
   - Gutters: Use --gutter-* for horizontal page margins
   - Internal: Use --space-* for component-level spacing
   ═══════════════════════════════════════════════════════════════════════════════ */

:root {
  /* ═══════════════════════════════════════════════════════════════════════════
     TRIBES DESIGN SYSTEM — INSTITUTIONAL STANDARD (LOCKED)
     Mercury/Stripe/Apple execution with JPMorgan restraint.
     ═══════════════════════════════════════════════════════════════════════════ */
  
  /* ─────────────────────────────────────────────────────────────────────────────
     GLOBAL TYPE SCALE (LOCKED — MERCURY/STRIPE INSTITUTIONAL)
     Base: 16px. Body: 16/24. H1: 40/44 mobile, 48/52 desktop. H2: 24/30.
     ───────────────────────────────────────────────────────────────────────────── */
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  
  /* Type scale */
  --text-xs: 12px;
  --text-sm: 14px;
  --text-base: 16px;
  --text-lg: 18px;
  --text-xl: 24px;
  --text-2xl: 40px;
  --text-3xl: 48px;
  
  /* Line heights */
  --lh-xs: 16px;
  --lh-sm: 20px;
  --lh-base: 24px;
  --lh-lg: 26px;
  --lh-xl: 30px;
  --lh-2xl: 44px;
  --lh-3xl: 52px;
  
  /* Font weights */
  --w-regular: 400;
  --w-medium: 500;
  --w-semibold: 600;
  --w-bold: 650;
  
  /* Legacy aliases */
  --text-md: 16px;
  --lh-tight: 1.15;
  --lh-body: 1.5;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     SPACING SCALE (LOCKED)
     ───────────────────────────────────────────────────────────────────────────── */
  --s1: 4px;
  --s2: 8px;
  --s3: 12px;
  --s4: 16px;
  --s5: 24px;
  --s6: 32px;
  --s7: 40px;
  --s8: 48px;
  --s9: 64px;
  
  /* Layout */
  --container: 1120px;
  --gutter-mobile: 20px;
  --gutter-desktop: 28px;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     COLOR SYSTEM (LOCKED)
     ───────────────────────────────────────────────────────────────────────────── */
  --bg: #ffffff;
  --fg: #0b0f14;
  --muted: rgba(11,15,20,.62);
  --muted2: rgba(11,15,20,.46);
  --line: rgba(11,15,20,.12);
  --surface: rgba(11,15,20,.03);
  --focus: #0071E3;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     RADIUS (LOCKED)
     ───────────────────────────────────────────────────────────────────────────── */
  --r-sm: 10px;
  --r-md: 14px;
  --r-lg: 18px;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     MOTION (LOCKED — INSTITUTIONAL SPEC)
     ───────────────────────────────────────────────────────────────────────────── */
  --ease: cubic-bezier(0.22, 1, 0.36, 1);
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --dur-1: 140ms;
  --dur-2: 220ms;
  --dur-3: 320ms;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     LEGACY SPACING SCALE — 8px base unit (for backward compatibility)
     ───────────────────────────────────────────────────────────────────────────── */
  --space-0: 0px;
  --space-1: 8px;
  --space-2: 12px;
  --space-3: 16px;
  --space-4: 24px;
  --space-5: 32px;
  --space-6: 48px;
  --space-7: 64px;
  --space-8: 80px;
  --space-9: 96px;
  --space-10: 120px;
  --space-11: 160px;
  --space-12: 200px;
  
  /* ═════════════════════════════════════════════════════════════════════════════
     MOBILE SPACING TOKENS — LOCKED PREMIUM SYSTEM (NO AD-HOC MARGINS)
     
     These tokens are authoritative. No component, section, or page may define
     custom vertical spacing outside these tokens.
     
     Usage:
     - Sections: section-dark-mobile, section-light-mobile
     - Internal stacks: stack-tight, stack-standard, stack-loose
     - Footer: footer-mobile
     ═════════════════════════════════════════════════════════════════════════════ */
  
  /* Section padding — premium institutional rhythm */
  --section-dark-mobile-pt: 96px;
  --section-dark-mobile-pb: 96px;
  --section-light-mobile-pt: 88px;
  --section-light-mobile-pb: 88px;
  
  /* Section divider — between conceptual blocks */
  --section-divider-mobile-mt: 64px;
  --section-divider-mobile-mb: 64px;
  
  /* Stack tokens — internal vertical rhythm */
  --stack-tight: 12px;     /* heading → body within single concept */
  --stack-standard: 20px;  /* heading → paragraph → paragraph */
  --stack-loose: 36px;     /* between subsections, e.g., Songwriters → Rights Holders */
  
  /* ═════════════════════════════════════════════════════════════════════════════
     LEDE → LIST/STEPS BRIDGE TOKENS — LOCKED
     
     These tokens enforce consistent spacing between a section lede and the first
     list/step item. Only ONE spacing rule applies at this boundary.
     
     Usage:
     - lede element: margin-bottom = ledeToList[Breakpoint]
     - first list item: margin-top = 0 (no additional top spacing)
     - subsequent items: gap = listItemStack[Breakpoint]
     ═════════════════════════════════════════════════════════════════════════════ */
  --lede-to-list-mobile: 20px;
  --lede-to-list-desktop: 24px;
  --list-item-stack-mobile: 28px;
  --list-item-stack-desktop: 32px;
  
  /* Footer padding — premium institutional presence */
  --footer-mobile-pt: 104px;
  --footer-mobile-pb: 104px;
  
  /* ═════════════════════════════════════════════════════════════════════════════
     ╔═══════════════════════════════════════════════════════════════════════════╗
     ║  GLOBAL NAVIGATION SYSTEM — DO NOT MODIFY                                 ║
     ║                                                                           ║
     ║  Mobile navigation, desktop navigation, and footer navigation are        ║
     ║  locked system components.                                                ║
     ║                                                                           ║
     ║  Changes are only permitted if:                                           ║
     ║    1. Tokens are intentionally updated, OR                                ║
     ║    2. This system note is explicitly revised.                             ║
     ║                                                                           ║
     ║  Page-level overrides, ad hoc spacing changes, alternate labels, or       ║
     ║  conditional variants are STRICTLY PROHIBITED.                            ║
     ║                                                                           ║
     ║  This applies to: Header (mobile + desktop), Footer, Sidebar              ║
     ╚═══════════════════════════════════════════════════════════════════════════╝
     ═════════════════════════════════════════════════════════════════════════════ */
  
  /* ─────────────────────────────────────────────────────────────────────────────
     MOBILE NAVIGATION TOKENS — LOCKED (STRIPE/MERCURY PATTERN)
     
     ╔═══════════════════════════════════════════════════════════════════════════╗
     ║  DO NOT TOUCH                                                             ║
     ║                                                                           ║
     ║  This mobile navigation structure, IA, typography tokens, and spacing    ║
     ║  are locked. Do not alter without explicit instruction.                   ║
     ╚═══════════════════════════════════════════════════════════════════════════╝
     
     Structure:
       Primary (top): Services, How Administration Works, How Licensing Works, Contact
       ─────────────────────────────────────────────────────────────────────────
       Actions (bottom): Sign in, Request Licensing Access
     ───────────────────────────────────────────────────────────────────────────── */
  
  /* Layout tokens */
  --nav-padding-x-mobile: 24px;
  --nav-header-pt-mobile: 20px;
  --nav-header-pb-mobile: 16px;
  --nav-content-pt-mobile: 16px;
  
  /* Spacing tokens — consistent rhythm */
  --nav-item-spacing-mobile: 4px;         /* Vertical gap between nav items */
  --nav-section-spacing-mobile: 32px;     /* Gap before action area */
  
  /* Typography — Primary navigation (top stack) */
  --nav-primary-size-mobile: 17px;
  --nav-primary-weight-mobile: 600;       /* Semibold — intentional hierarchy */
  --nav-primary-color-mobile: 0 0% 9%;
  
  /* Typography — Action items (bottom stack) */
  --nav-action-size-mobile: 17px;
  --nav-action-weight-mobile: 500;        /* Medium — subordinate to primary */
  --nav-action-color-mobile: 0 0% 9%;
  
  /* Divider */
  --nav-divider-color-mobile: 0 0% 0% / 0.08;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     DESKTOP NAVIGATION TOKENS — LOCKED
     ───────────────────────────────────────────────────────────────────────────── */
  --desktop-nav-height: 64px;
  --desktop-nav-padding-x: 32px;
  --desktop-nav-item-gap: 8px;
  --desktop-nav-font-size: 15px;
  --desktop-nav-font-weight: 400;
  --desktop-nav-font-weight-hover: 500;
  --desktop-nav-color: 0 0% 29%;           /* #4A4A4A */
  --desktop-nav-color-hover: 0 0% 0%;      /* #000000 */
  --desktop-nav-sidebar-width: 420px;
  --desktop-nav-divider-gap: 32px;
  --desktop-nav-header-pt: 24px;
  --desktop-nav-header-pb: 16px;
  --desktop-nav-content-pt: 24px;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     FOOTER NAVIGATION TOKENS — LOCKED
     ───────────────────────────────────────────────────────────────────────────── */
  --footer-padding-y: 72px;
  --footer-section-gap: 36px;
  --footer-label-gap: 16px;
  --footer-link-gap: 13px;
  --footer-signature-gap: 56px;
  --footer-column-gap-tablet: 40px;
  --footer-column-gap-desktop: 64px;
  --footer-label-size: 11px;
  --footer-label-weight: 500;
  --footer-label-tracking: 0.12em;
  --footer-label-color: 0 0% 100% / 0.40;
  --footer-link-size: 13px;
  --footer-link-color: 0 0% 100% / 0.70;
  --footer-link-color-hover: 0 0% 100%;
  --footer-wordmark-size: 13px;
  --footer-wordmark-size-desktop: 14px;
  --footer-copyright-size: 11px;
  --footer-copyright-color: 0 0% 100% / 0.50;

  /* ─────────────────────────────────────────────────────────────────────────────
     PAGE GUTTERS — Horizontal container padding (LOCKED)
     Mobile: 20px | Desktop: 28px
     ───────────────────────────────────────────────────────────────────────────── */
  --gutter: 20px; /* Mobile default */

  /* ─────────────────────────────────────────────────────────────────────────────
     SECTION PADDING — Responsive vertical rhythm for major page sections
     Uses locked mobile tokens, scales up for tablet/desktop
     ───────────────────────────────────────────────────────────────────────────── */
  --section-padding-y-light: var(--section-light-mobile-pt);
  --section-padding-y-dark: var(--section-dark-mobile-pt);
  /* Legacy alias */
  --section-padding-y: var(--section-padding-y-light);

  /* ─────────────────────────────────────────────────────────────────────────────
     SECTION HEADER RHYTHM — Eyebrow + headline pattern
     ───────────────────────────────────────────────────────────────────────────── */
  --eyebrow-top: var(--space-5);     /* 32px breathing room from section top */
  --eyebrow-bottom: var(--space-4);  /* 24px to headline */
  --headline-bottom: var(--space-6); /* 48px to content */

  /* ─────────────────────────────────────────────────────────────────────────────
     CONTENT RHYTHM — Internal spacing (using stack tokens)
     ───────────────────────────────────────────────────────────────────────────── */
  --paragraph-gap: var(--stack-standard); /* 20px between paragraph blocks */
  --card-gap: var(--stack-loose);         /* 36px between major items on mobile */
  --step-gap: var(--stack-loose);         /* 36px between numbered steps on mobile */
  --step-list-top: var(--space-4);        /* 24px above step list */
}

/* Tablet breakpoint (768px+) — Gutter stays 20px for tablet */
@media (min-width: 768px) {
  :root {
    --section-padding-y-light: var(--space-10); /* 120px */
    --section-padding-y-dark: var(--space-10);  /* 120px */
    --section-padding-y: var(--space-10);       /* Legacy alias */
    --card-gap: var(--space-6);                 /* 48px on tablet+ */
    --step-gap: 56px;                           /* Premium step spacing on tablet+ */
    --footer-pt-mobile: 80px;
    --footer-pb-mobile: 80px;
  }
}

/* Desktop breakpoint (1024px+) */
@media (min-width: 1024px) {
  :root {
    --gutter: 28px;                             /* Desktop gutter (LOCKED) */
    --section-padding-y-light: var(--space-11); /* 160px */
    --section-padding-y-dark: var(--space-11);  /* 160px */
    --section-padding-y: var(--space-11);       /* Legacy alias */
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL COLOR CONTRAST SYSTEM — LOCKED

   This color system is authoritative and must not drift.
   All text must pass WCAG AA contrast minimums.

   LIGHT MODE (default):
   - Primary text: foreground (HSL 0 0% 9%) — near-black
   - Secondary text: muted-foreground (HSL 0 0% 45%) — readable gray
   - Background: background (HSL 0 0% 100%) — white

   DARK SECTIONS (#111214):
   - Primary text: white/92 — Headlines, critical copy
   - Secondary text: white/70-72 — Descriptions, body copy
   - Tertiary text: white/55-65 — Labels, meta, supporting copy
   - Meta/Footer text: white/50-60 — Copyright, legal links
   - Links: white/60 default → white/80 hover
   - Dividers: white/15

   PROHIBITIONS:
   - No text below white/50 on dark backgrounds
   - No arbitrary gray values — use semantic tokens
   - No opacity-based text that reduces readability
   ═══════════════════════════════════════════════════════════════════════════════ */

/* Apple-grade Design System
   System typography, spacing-led layout, minimal dividers, calm hierarchy */

@layer base {
  :root {
    /* Header height for content clearance calculations */
    --header-height: 64px;
    /* Mobile-aware header height variable used by hero sections */
    --header-h: 56px; /* Mobile: 56px (h-14) */

    /* Site black (LOCKED) — used as the global baseline behind all pages */
    /* #0A0A0A = 0 0% 4% in HSL */
    --site-black: 0 0% 4%;

    /* Background & Surface */
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;

    /* Primary - Neutral dark */
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 100%;

    /* Secondary - Soft gray */
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;

    /* Muted */
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;

    /* Accent */
    --accent: 0 0% 96%;
    --accent-foreground: 0 0% 9%;

    /* Destructive */
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    /* Borders & Inputs */
    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 0 0% 9%;

    --radius: 10px;

    /* Tribes consent checkbox tokens (LOCKED) */
    --tribes-checkbox-border: 0 0% 81%; /* ~#cfcfcf */
    --tribes-checkbox-border-checked: 0 0% 53%; /* ~#888 */
    --tribes-checkbox-check: 0 0% 7%; /* ~#111 */
    --tribes-checkbox-focus: 0 0% 7% / 0.25;

    /* Sidebar */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 0 0% 45%;
    --sidebar-primary: 0 0% 9%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 94%;
    --sidebar-accent-foreground: 0 0% 9%;
    --sidebar-border: 0 0% 90%;
    --sidebar-ring: 0 0% 9%;

    /* Semantic */
    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 9%;
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;
  }

  .dark {
    /* Near-black backgrounds - #0E0F12 primary, #13141A secondary */
    --background: 228 10% 6%;
    --foreground: 220 10% 97%;

    /* Cards use secondary dark */
    --card: 228 10% 9%;
    --card-foreground: 220 10% 97%;

    --popover: 228 10% 9%;
    --popover-foreground: 220 10% 97%;

    /* Primary inverts for dark */
    --primary: 220 10% 97%;
    --primary-foreground: 228 10% 6%;

    /* Secondary surfaces */
    --secondary: 228 10% 12%;
    --secondary-foreground: 220 10% 97%;

    /* Muted - reduced opacity text */
    --muted: 228 10% 12%;
    --muted-foreground: 220 5% 60%;

    /* Accent */
    --accent: 228 10% 12%;
    --accent-foreground: 220 10% 97%;

    --destructive: 0 62% 45%;
    --destructive-foreground: 220 10% 97%;

    /* Thin dividers - rgba(255,255,255,0.08) equivalent */
    --border: 0 0% 100% / 0.08;
    --input: 228 10% 15%;
    --ring: 220 10% 80%;

    --sidebar-background: 228 10% 6%;
    --sidebar-foreground: 220 5% 60%;
    --sidebar-primary: 220 10% 97%;
    --sidebar-primary-foreground: 228 10% 6%;
    --sidebar-accent: 228 10% 12%;
    --sidebar-accent-foreground: 220 10% 97%;
    --sidebar-border: 0 0% 100% / 0.08;
    --sidebar-ring: 220 10% 80%;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL TYPOGRAPHY SCALE — MERCURY-GRADE DENSITY (LOCKED)

   This typography system is authoritative and must not drift.
   No page-specific overrides. Mercury/JPMorgan reference standard.
   
   REDUCED ~10-15% from previous scale for institutional fintech density.

   H1: 28px (mobile) / 36px (desktop), Semibold, -0.015em tracking
   H2: 17px globally, Medium weight, subordinate to H1
   Body: 14px, Regular, 1.65 line-height for long-form reading
   Meta: 11px for helper text, labels

   SPACING (reduced ~10-15%):
   - H1 margin-bottom: 10px (tight coupling to intro)
   - H2 margin-bottom: 14px
   - Paragraph gap: 0.875rem (not stacked whitespace)
   ═══════════════════════════════════════════════════════════════════════════════ */
@layer base {
  * {
    @apply border-border;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     GLOBAL VIEWPORT + iOS SAFARI FIX — PREVENTS WHITE FALL-THROUGH

     CRITICAL: html/body background is DARK by default to prevent white bleed
     on iOS Safari during bounce, dynamic viewport changes, and safe-area reveal.

     Light pages explicitly paint their own white background via layout wrappers.
     ═══════════════════════════════════════════════════════════════════════════ */
  html {
    /* Site black baseline - prevents iOS white flash (#0A0A0A) */
    background-color: #0A0A0A !important;
    background-color: hsl(var(--site-black)) !important;
    margin: 0;
    padding: 0;
    height: 100%;
    min-height: 100%;
    /* DO NOT use scroll-behavior: smooth globally — causes jank on iOS */
    /* Prevent bounce revealing light browser canvas */
    overscroll-behavior-y: none;
  }

  body {
    /* Site black baseline for iOS Safari (#0A0A0A) */
    background-color: #0A0A0A !important;
    background-color: hsl(var(--site-black)) !important;
    color: var(--fg);
    font-family: var(--font-sans);
    font-size: var(--text-base); /* 16px */
    line-height: var(--lh-base); /* 24px */
    font-weight: var(--w-regular);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin: 0;
    padding: 0;
    height: 100%;
    /* Prevent horizontal overflow — body is sole scroll container */
    overflow-x: hidden;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     SCROLL-LOCK STATE — Applied via JS when modals/menus open
     Preserves scroll position and compensates for scrollbar width
     ═══════════════════════════════════════════════════════════════════════════ */
  body.scroll-locked {
    overflow: hidden !important;
    /* Scrollbar width compensation applied via JS --scrollbar-width */
    padding-right: var(--scrollbar-width, 0px);
  }

  /* Reduced motion: disable all animations and transitions */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* iOS Safari: fixed full-viewport underlay so overscroll can never reveal white */
  #ios-underlay {
    position: fixed;
    inset: 0;
    background-color: #0A0A0A;
    background-color: hsl(var(--site-black));
    z-index: 0;
    pointer-events: none;
  }

  /* App root element(s) - ensures full viewport coverage */
  #root,
  #__next {
    position: relative;
    z-index: 1;
    /* Dark background as baseline - prevents white flash on overscroll */
    background: hsl(var(--site-black));
    /* Simple min-height — no dynamic viewport units that cause iOS stretch */
    min-height: 100%;
    /* Safe area padding for notched devices */
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     GLOBAL HEADING SCALE — MERCURY/STRIPE INSTITUTIONAL (LOCKED)
     
     H1: 40px/44px (mobile), 48px/52px (desktop), weight 650
     H2: 24px/30px, weight 650
     Body: 16px/24px, weight 400, color rgba(0,0,0,0.68)
     Small/caps: 12px/16px, tracking 0.18em, weight 600
     ═══════════════════════════════════════════════════════════════════════════ */

  /* H1 — Primary page heading */
  h1 {
    font-size: var(--text-2xl); /* 40px */
    font-weight: var(--w-bold); /* 650 */
    line-height: var(--lh-2xl); /* 44px */
    letter-spacing: -0.02em;
    scroll-margin-top: calc(var(--header-height) + 20px);
  }

  @media (min-width: 768px) {
    :root {
      --header-h: 72px;
    }
    h1 {
      font-size: var(--text-3xl); /* 48px */
      line-height: var(--lh-3xl); /* 52px */
    }
  }

  /* H2 — Section titles */
  h2 {
    font-size: var(--text-xl); /* 24px */
    font-weight: var(--w-bold); /* 650 */
    line-height: var(--lh-xl); /* 30px */
    letter-spacing: -0.01em;
    scroll-margin-top: calc(var(--header-height) + 20px);
  }

  /* H3-H6 — Subsection headings */
  h3 {
    font-size: var(--text-lg); /* 18px */
    font-weight: var(--w-semibold);
    line-height: var(--lh-lg); /* 26px */
  }

  h4, h5, h6 {
    font-size: var(--text-sm); /* 14px */
    font-weight: var(--w-semibold);
    line-height: var(--lh-sm); /* 20px */
  }

  /* Body text — global default */
  p, li, td, th {
    color: rgba(0,0,0,0.68);
  }

  /* Small label/caps utility */
  .label-caps {
    font-size: var(--text-xs); /* 12px */
    line-height: var(--lh-xs); /* 16px */
    font-weight: var(--w-semibold);
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(0,0,0,0.46);
  }

  /* Paragraph rhythm */
  p + p {
    margin-top: 0.75rem;
  }
}

@layer components {
  /* Status chips - outline only, neutral */
  .status-chip {
    @apply inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium;
    @apply border border-border bg-transparent text-muted-foreground;
  }

  /* ═════════════════════════════════════════════════════════════════════════════
     LOCKED SECTION PADDING CLASSES — TRIBES PREMIUM RHYTHM
     
     These classes enforce the locked mobile spacing tokens.
     No other vertical spacing should be used on marketing sections.
     ═════════════════════════════════════════════════════════════════════════════ */
  
  /* Light section padding (white background) — 88px mobile, scales on tablet+ */
  .section-padding,
  .section-padding-light {
    padding-top: var(--section-padding-y-light);
    padding-bottom: var(--section-padding-y-light);
  }

  /* Dark section padding (black background) — 96px mobile, scales on tablet+ */
  .section-padding-dark {
    padding-top: var(--section-padding-y-dark);
    padding-bottom: var(--section-padding-y-dark);
  }
  
  /* Stack utilities — locked internal rhythm */
  .stack-tight {
    gap: var(--stack-tight);
  }
  
  .stack-standard {
    gap: var(--stack-standard);
  }
  
  .stack-loose {
    gap: var(--stack-loose);
  }
  
  /* Margin variants for non-flex contexts */
  .mt-stack-tight { margin-top: var(--stack-tight); }
  .mt-stack-standard { margin-top: var(--stack-standard); }
  .mt-stack-loose { margin-top: var(--stack-loose); }
  .mb-stack-tight { margin-bottom: var(--stack-tight); }
  .mb-stack-standard { margin-bottom: var(--stack-standard); }
  .mb-stack-loose { margin-bottom: var(--stack-loose); }
  
  /* ═════════════════════════════════════════════════════════════════════════════
     LEDE → LIST/STEPS BRIDGE — LOCKED PATTERN
     
     Ensures consistent spacing between section lede and first list/step item.
     Prevents double-gap issues from stacked margins/paddings.
     
     Usage:
     - Apply .lede-to-list to the lede element (adds margin-bottom)
     - Apply .list-step-stack to the list/steps container (sets gap between items)
     - First item automatically has no top margin via gap behavior
     ═════════════════════════════════════════════════════════════════════════════ */
  .lede-to-list {
    margin-bottom: var(--lede-to-list-mobile);
  }
  
  @media (min-width: 768px) {
    .lede-to-list {
      margin-bottom: var(--lede-to-list-desktop);
    }
  }
  
  /* Step/list container — locked spacing between items */
  .list-step-stack {
    display: flex;
    flex-direction: column;
    gap: var(--list-item-stack-mobile);
  }
  
  @media (min-width: 768px) {
    .list-step-stack {
      gap: var(--list-item-stack-desktop);
    }
  }

  /* Legacy footer padding — kept for compact variant compatibility only */
  .footer-padding {
    padding-top: var(--section-padding-y);
    padding-bottom: var(--space-9);
  }

  /* Section spacing */
  .section-gap {
    @apply mb-8; /* 32px */
  }

  .subsection-gap {
    @apply mb-6; /* 24px */
  }

  .row-gap {
    @apply mb-3; /* 12px */
  }

  /* Hairline divider */
  .divider {
    @apply h-px bg-border/50;
  }

  /* Row density */
  .row-comfortable {
    @apply py-4; /* ~16px vertical = 56px total */
  }

  .row-compact {
    @apply py-2.5; /* ~10px vertical = 44px total */
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INSTITUTIONAL MOTION SYSTEM — LOCKED SPEC v2.0
     
     ╔═══════════════════════════════════════════════════════════════════════════╗
     ║  Single easing: cubic-bezier(0.25, 0.1, 0.25, 1)                          ║
     ║  Micro (focus/hover): 120ms | Standard: 220ms | Panel: 280ms             ║
     ║  Opacity transitions only. No transforms on hover/active.                ║
     ║  Calm. Controlled. Engineered.                                           ║
     ╚═══════════════════════════════════════════════════════════════════════════╝
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Focus ring - visible, 1px solid, 2px offset */
  .focus-ring {
    @apply focus-visible:outline-none;
  }

  .focus-ring:focus-visible {
    outline: 1px solid hsl(0 0% 9% / 0.4);
    outline-offset: 2px;
  }

  .dark .focus-ring:focus-visible,
  [data-dark="true"] .focus-ring:focus-visible {
    outline-color: hsl(0 0% 100% / 0.4);
  }

  /* Hover state - 120ms, opacity only */
  .hover-subtle {
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  .hover-subtle:hover {
    opacity: 0.85;
  }

  /* Button hover - 120ms, opacity only, NO transforms */
  .btn-hover {
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  .btn-hover:hover {
    opacity: 0.85;
  }

  /* Press/Active - opacity change only, same easing */
  .btn-hover:active {
    opacity: 0.75;
  }

  /* Link hover - 120ms, underline emphasis only */
  .link-hover {
    transition: text-decoration-color 120ms cubic-bezier(0.25, 0.1, 0.25, 1), opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    text-decoration: underline;
    text-decoration-color: transparent;
    text-underline-offset: 2px;
  }

  .link-hover:hover {
    text-decoration-color: currentColor;
  }

  /* Link simple - 120ms, opacity shift only (for navigation) */
  .link-simple {
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  .link-simple:hover {
    opacity: 0.75;
  }
  
  .link-simple:active {
    opacity: 0.6;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     TRIBES GLOBAL NAVIGATION — INSTITUTIONAL TAKEOVER (LOCKED)
     
     Full-height, full-width navigation takeover.
     
     Motion (LOCKED — INSTITUTIONAL SPEC v2.0):
       280ms, cubic-bezier(0.25, 0.1, 0.25, 1)
       Fade + subtle vertical translate. Calm. Controlled.
     
     Background: #FAF9F7 (warm institutional off-white)
     No shadows. No rounded corners. No card containers. No elevation.
     ═══════════════════════════════════════════════════════════════════════════ */
  
  /* Full-screen takeover container */
  .mercury-nav {
    position: fixed;
    inset: 0;
    z-index: 100;
    background-color: #FAF9F7;
    display: flex;
    flex-direction: column;
    opacity: 0;
    pointer-events: none;
    transform: translateY(-6px);
    will-change: opacity, transform;
    transition: opacity 280ms cubic-bezier(0.25, 0.1, 0.25, 1), transform 280ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  
  .mercury-nav--open {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }
  
  /* Header bar — fixed at top
     LOCKED: Uses identical --gutter values as site header for pixel-perfect alignment.
     Do NOT use custom padding values. Always reference --gutter. */
  .mercury-nav-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 64px;
    padding: 0 var(--gutter);
    flex-shrink: 0;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }
  
  @media (min-width: 768px) {
    .mercury-nav-header {
      height: 72px;
    }
  }
  
  /* Wordmark — matches site header */
  .mercury-nav-wordmark {
    font-size: 15px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: #111111;
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  
  .mercury-nav-wordmark:hover {
    opacity: 0.7;
  }
  
  @media (min-width: 768px) {
    .mercury-nav-wordmark {
      font-size: 17px;
    }
  }
  
  /* Close button — thin X, no circle, no background
     LOCKED: margin-right offset matches hamburger button in header (-8px / -mr-2) */
  .mercury-nav-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    min-height: 44px;
    margin-right: -8px;
    color: #111111;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  
  .mercury-nav-close:hover {
    opacity: 0.6;
  }
  
  .mercury-nav-close:active {
    opacity: 0.4;
  }
  
  /* Primary navigation links — LOCKED: uses identical --gutter for alignment */
  .mercury-nav-links {
    display: flex;
    flex-direction: column;
    padding: 16px var(--gutter) 0;
    flex: 1;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }
  
  @media (min-width: 768px) {
    .mercury-nav-links {
      padding: 24px var(--gutter) 0;
    }
  }
  
  /* Navigation link — MERCURY-GRADE: 15-16px, regular weight, compact spacing */
  .mercury-nav-link {
    display: block;
    font-size: 15px;
    font-weight: 400;
    line-height: 1.35;
    color: #1A1A1A;
    padding: 12px 0;
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", system-ui, sans-serif;
  }
  
  .mercury-nav-link:hover {
    opacity: 0.6;
  }
  
  .mercury-nav-link:active {
    opacity: 0.4;
  }
  
  @media (min-width: 768px) {
    .mercury-nav-link {
      font-size: 16px;
      padding: 14px 0;
    }
  }
  
  /* Account actions — LOCKED: uses identical --gutter for alignment */
  .mercury-nav-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 20px var(--gutter);
    padding-bottom: max(20px, env(safe-area-inset-bottom));
    flex-shrink: 0;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }
  
  @media (min-width: 768px) {
    .mercury-nav-actions {
      flex-direction: row;
      gap: 12px;
      padding: 24px var(--gutter);
      padding-bottom: 32px;
    }
  }
  
  /* Action button base — INSTITUTIONAL: same size as nav links, no CTA inflation */
  .mercury-nav-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 44px;
    min-height: 44px;
    padding: 0 20px;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -0.005em;
    border-radius: 6px;
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", system-ui, sans-serif;
  }
  
  .mercury-nav-btn:active {
    opacity: 0.75;
  }
  
  @media (min-width: 768px) {
    .mercury-nav-btn {
      flex: 1;
      max-width: 220px;
      font-size: 15px;
    }
  }
  
  /* Primary button — solid dark */
  .mercury-nav-btn--primary {
    background-color: #111111;
    color: #FFFFFF;
  }
  
  .mercury-nav-btn--primary:hover {
    opacity: 0.85;
  }
  
  /* Secondary button — light outline */
  .mercury-nav-btn--secondary {
    background-color: transparent;
    color: #111111;
    border: 1px solid rgba(0, 0, 0, 0.12);
  }
  
  .mercury-nav-btn--secondary:hover {
    background-color: rgba(0, 0, 0, 0.03);
  }
  /* ═══════════════════════════════════════════════════════════════════════════
     LEGACY UNIFIED NAV STYLES — DEPRECATED (kept for compatibility)
     ═══════════════════════════════════════════════════════════════════════════ */
  
  /* Backdrop overlay — positioned below header, subtle Apple-style dim + blur */
  .unified-nav-backdrop {
    top: 56px; /* Mobile header height */
    background-color: rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  
  @media (min-width: 768px) {
    .unified-nav-backdrop {
      top: 64px; /* Tablet/Desktop header height */
    }
  }
  
  /* Navigation panel — fixed positioned, content-fit height on all breakpoints
     LOCKED: Opens downward from header, height limited to content, never full viewport */
  .unified-nav-panel {
    position: fixed;
    left: 0;
    right: 0;
    top: 56px; /* Mobile header height */
    z-index: 50;
    background-color: #FFFFFF;
    touch-action: none;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    /* Content-fit height — NOT full viewport */
    height: auto;
    max-height: calc(100vh - 56px);
    max-height: calc(100dvh - 56px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
    overflow-y: auto;
  }
  
  /* Tablet/Desktop: same content-fit behavior */
  @media (min-width: 768px) {
    .unified-nav-panel {
      top: 64px; /* Tablet/Desktop header height */
      max-height: calc(100vh - 64px);
      max-height: calc(100dvh - 64px);
    }
  }
  
  /* Container — full width on mobile, constrained on tablet+ */
  .unified-nav-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding-left: var(--nav-padding-x-mobile);
    padding-right: var(--nav-padding-x-mobile);
  }
  
  @media (min-width: 768px) {
    .unified-nav-container {
      height: auto;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      padding-left: 40px;
      padding-right: 40px;
    }
  }
  
  /* Header with close button — mobile only */
  .unified-nav-header {
    display: flex;
    justify-content: flex-end;
    padding-top: var(--nav-header-pt-mobile);
    padding-bottom: var(--nav-header-pb-mobile);
  }
  
  @media (min-width: 768px) {
    .unified-nav-header {
      display: none;
    }
  }
  
  /* Navigation content wrapper */
  .unified-nav-content {
    display: flex;
    flex-direction: column;
    padding-top: var(--nav-content-pt-mobile);
  }
  
  @media (min-width: 768px) {
    .unified-nav-content {
      padding-top: 32px;
      padding-bottom: 32px;
      min-width: 280px;
      width: fit-content;
    }
  }
  
  /* Navigation group */
  .unified-nav-group {
    display: flex;
    flex-direction: column;
    gap: var(--nav-item-spacing-mobile);
  }
  
  @media (min-width: 768px) {
    .unified-nav-group {
      gap: 6px;
    }
  }
  
  /* Divider between groups */
  .unified-nav-divider {
    width: 100%;
    margin-top: var(--nav-section-spacing-mobile);
    margin-bottom: var(--nav-section-spacing-mobile);
    border-top: 1px solid hsl(var(--nav-divider-color-mobile));
  }
  
  @media (min-width: 768px) {
    .unified-nav-divider {
      margin-top: 16px;
      margin-bottom: 16px;
      max-width: 200px;
      border-top: 1px solid rgba(0, 0, 0, 0.06);
    }
  }
  
  /* ─────────────────────────────────────────────────────────────────────────────
     UNIFIED NAV ITEM STYLES — Responsive typography
     ───────────────────────────────────────────────────────────────────────────── */
  
  /* Primary items (Services, How..., Contact) */
  .unified-nav-item-primary {
    font-size: var(--nav-primary-size-mobile);
    font-weight: var(--nav-primary-weight-mobile);
    color: hsl(var(--nav-primary-color-mobile));
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    display: flex;
    align-items: center;
    min-height: 48px;
  }
  
  @media (min-width: 768px) {
    .unified-nav-item-primary {
      font-size: 14px;
      font-weight: 400;
      min-height: auto;
      padding: 8px 0;
      display: block;
    }
  }
  
  .unified-nav-item-primary:hover,
  .unified-nav-item-primary:focus-visible {
    opacity: 0.6;
  }
  
  .unified-nav-item-primary:focus-visible {
    outline: 1px solid hsl(var(--foreground) / 0.15);
    outline-offset: 2px;
  }
  
  /* Action items (Client Portal, Request Licensing Access) */
  .unified-nav-item-action {
    font-size: var(--nav-action-size-mobile);
    font-weight: var(--nav-action-weight-mobile);
    color: hsl(var(--nav-action-color-mobile));
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    display: flex;
    align-items: center;
    min-height: 48px;
  }
  
  @media (min-width: 768px) {
    .unified-nav-item-action {
      font-size: 14px;
      font-weight: 400;
      min-height: auto;
      padding: 8px 0;
      display: block;
    }
  }
  
  .unified-nav-item-action:hover,
  .unified-nav-item-action:focus-visible {
    opacity: 0.6;
  }
  
  .unified-nav-item-action:focus-visible {
    outline: 1px solid hsl(var(--foreground) / 0.15);
    outline-offset: 2px;
  }
  
  /* ═══════════════════════════════════════════════════════════════════════════
     LEGACY NAVIGATION CLASSES — Kept for backwards compatibility
     TODO: Remove after full migration verification
     ═══════════════════════════════════════════════════════════════════════════ */
  
  .mobile-nav-overlay {
    touch-action: none;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  .nav-primary-mobile {
    font-size: var(--nav-primary-size-mobile);
    font-weight: var(--nav-primary-weight-mobile);
    color: hsl(var(--nav-primary-color-mobile));
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    display: flex;
    align-items: center;
    min-height: 48px;
  }
  
  .nav-primary-mobile:hover,
  .nav-primary-mobile:focus-visible {
    opacity: 0.6;
  }
  
  .nav-action-mobile {
    font-size: var(--nav-action-size-mobile);
    font-weight: var(--nav-action-weight-mobile);
    color: hsl(var(--nav-action-color-mobile));
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    display: flex;
    align-items: center;
    min-height: 48px;
  }
  
  .nav-action-mobile:hover,
  .nav-action-mobile:focus-visible {
    opacity: 0.6;
  }
  
  .desktop-dropdown-item {
    font-size: 14px;
    font-weight: 400;
    color: hsl(var(--foreground));
    padding: 8px 0;
    transition: opacity 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
    display: block;
  }
  
  .desktop-dropdown-item:hover {
    opacity: 0.6;
  }
  
  .desktop-dropdown-item:focus-visible {
    outline: 1px solid hsl(var(--foreground) / 0.15);
    outline-offset: 2px;
  }

  
  .footer-system {
    /* Token-driven — no inline overrides */
  }
  
  .footer-nav-grid {
    display: flex;
    flex-direction: column;
    gap: var(--footer-section-gap);
  }
  
  @media (min-width: 768px) {
    .footer-nav-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--footer-column-gap-tablet);
    }
  }
  
  @media (min-width: 1024px) {
    .footer-nav-grid {
      gap: var(--footer-column-gap-desktop);
    }
  }
  
  .footer-column {
    display: flex;
    flex-direction: column;
  }
  
  .footer-label {
    font-size: var(--footer-label-size);
    font-weight: var(--footer-label-weight);
    text-transform: uppercase;
    letter-spacing: var(--footer-label-tracking);
    color: hsl(var(--footer-label-color));
    margin-bottom: var(--footer-label-gap);
  }
  
  .footer-links {
    display: flex;
    flex-direction: column;
    gap: 4px; /* Reduced gap, touch target via padding */
  }
  
  .footer-link {
    font-size: var(--footer-link-size);
    color: hsl(var(--footer-link-color));
    transition: opacity 150ms ease-out;
    display: block;
    padding: 8px 0; /* Touch target: 8px + ~17px text + 8px = ~33px min, + gap = 44px+ */
    margin: 0 -4px;
    padding-left: 4px;
    padding-right: 4px;
  }
  
  .footer-link:hover,
  .footer-link:focus-visible {
    opacity: 1;
    color: hsl(var(--footer-link-color-hover));
  }
  
  .footer-link:focus-visible {
    outline: 1px solid hsl(0 0% 100% / 0.20);
    outline-offset: 2px;
  }
  
  .footer-link-disabled {
    font-size: var(--footer-link-size);
    color: hsl(0 0% 100% / 0.50);
    display: block;
  }
  
  .footer-signature {
    margin-top: var(--footer-signature-gap);
  }
  
  .footer-wordmark {
    font-size: var(--footer-wordmark-size);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: hsl(0 0% 100%);
    display: block;
  }
  
  @media (min-width: 768px) {
    .footer-wordmark {
      font-size: var(--footer-wordmark-size-desktop);
    }
  }
  
  .footer-copyright {
    font-size: var(--footer-copyright-size);
    color: hsl(var(--footer-copyright-color));
    margin-top: 6px;
  }

  /* Disabled state - opacity only, no events */
  .state-disabled {
    @apply opacity-50 pointer-events-none cursor-not-allowed;
  }

  /* Input focus - border emphasis, no ring glow */
  .input-focus {
    @apply transition-[border-color] duration-150 ease-out;
  }

  .input-focus:hover:not(:disabled):not(:focus) {
    border-color: hsl(0 0% 70%);
  }

  .input-focus:focus {
    border-color: hsl(0 0% 50%);
    outline: none;
  }

  /* Label style */
  .label-muted {
    @apply text-xs font-medium text-muted-foreground;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   FORM PRIMITIVE HARD OVERRIDES — TRIBES INSTITUTIONAL STANDARD (LOCKED)

   Purpose: ensure NO default/consumer-grade form UI survives anywhere.
   Applies to: all forms across the site (public + auth + portal + admin).
   Excludes: non-form UI by scoping to <form> where possible.

   Non-negotiables:
   - No filled-square checkbox state
   - No pill inputs
   - No glows/shadows
   - Strong disabled contrast separation
   ═══════════════════════════════════════════════════════════════════════════════ */

@layer base {
  /* Inputs / textareas / selects — hard reset inside forms */
  :where(form) :where(
      input:not([type="checkbox"]):not([type="radio"]):not([type="range"]):not([type="file"]):not([type="color"]),
      textarea,
      select
    ) {
    -webkit-appearance: none;
    appearance: none;
    border-radius: 6px;
    border-width: 1px;
    border-style: solid;
    border-color: hsl(0 0% 82%); /* ~#d0d0d0 */
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-size: 15px;
    line-height: 1.4;
    padding: 10px 12px; /* dense, contractual */
    min-height: 48px;
    box-shadow: none;
  }

  :where(form) textarea {
    min-height: 120px;
    padding-top: 12px;
    resize: none;
  }

  :where(form) :where(input, textarea)::placeholder {
    color: hsl(0 0% 55%);
  }

  :where(form) :where(input, textarea, select):disabled {
    background-color: hsl(0 0% 98%);
    border-color: hsl(0 0% 86%);
    color: hsl(0 0% 45%);
    cursor: not-allowed;
  }

  /* Focus: darker border, no glow, no layout shift */
  :where(form) :where(input, textarea, select):focus {
    outline: none;
    border-color: hsl(0 0% 7%); /* ~#111 */
  }

  /* Primary submit buttons (native) */
  :where(form) button[type="submit"],
  :where(form) button:not([type]) {
    border-radius: 6px;
    min-height: 48px;
  }

  :where(form) button[type="submit"] {
    width: 100%;
    background-color: hsl(var(--foreground));
    color: hsl(var(--background));
    font-size: 15px;
    font-weight: 500;
    box-shadow: none;
    transition: opacity 150ms ease-out;
  }

  :where(form) button[type="submit"]:hover {
    opacity: 0.9;
  }

  :where(form) button[type="submit"]:disabled {
    background-color: hsl(0 0% 64%);
    color: hsl(0 0% 100%);
    opacity: 1;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* Radix Checkbox (role="checkbox") — FORCIBLY NO FILL WHEN CHECKED */
  button[role="checkbox"][data-state] {
    background-color: hsl(var(--background)) !important;
    border: 1px solid hsl(0 0% 82%) !important;
    border-radius: 2px !important;
    box-shadow: none !important;
  }

  button[role="checkbox"][data-state="checked"] {
    background-color: hsl(var(--background)) !important;
    border-color: hsl(0 0% 32%) !important;
    color: hsl(0 0% 7%) !important;
  }

  button[role="checkbox"][data-state][data-disabled] {
    opacity: 0.45 !important;
  }

  /* Native checkbox fallback (if any exist) — EXCLUDES TribesCheckbox */
  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]) {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 2px;
    border: 1px solid hsl(0 0% 82%);
    background-color: hsl(var(--background));
    display: inline-grid;
    place-content: center;
  }

  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]):checked {
    border-color: hsl(0 0% 32%);
    background-color: hsl(var(--background));
  }

  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]):checked::after {
    content: "";
    width: 10px;
    height: 10px;
    transform: translateY(-0.5px) rotate(45deg);
    border-right: 2px solid hsl(0 0% 7%);
    border-bottom: 2px solid hsl(0 0% 7%);
  }

  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]):disabled {
    opacity: 0.45;
  }
}


/* ═══════════════════════════════════════════════════════════════════════════════
   UX HARDENING — TRIBES INSTITUTIONAL STANDARD (LOCKED)
   
   Global interaction polish: tap targets, focus states, link feedback,
   headline orphan prevention. Applied to all marketing pages.
   ═══════════════════════════════════════════════════════════════════════════════ */

/* C) TAP TARGETS — Minimum 44px touch area for mobile accessibility */
@layer base {
  /* Ensure all interactive elements have adequate tap area */
  a, button {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
  }
  
  /* CRITICAL: Radix checkbox renders as button — prevent inflation */
  button[role="checkbox"] {
    min-height: unset;
    height: auto;
    align-items: flex-start;
  }
  
  /* Exception: inline text links within paragraphs */
  p a, li a, span a {
    min-height: auto;
    display: inline;
  }
  
  /* Navigation links get explicit padding for tap area */
  nav a {
    padding-top: 10px;
    padding-bottom: 10px;
  }
}

/* D) FOCUS STATES — Accessible focus ring (LOCKED) */
@layer base {
  /* Global focus-visible for all interactive elements */
  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }
  
  /* Dark background focus states */
  [data-theme="dark"] a:focus-visible,
  [data-theme="dark"] button:focus-visible,
  [style*="background: #0B"] a:focus-visible,
  [style*="background: #0B"] button:focus-visible,
  [style*="backgroundColor"] a:focus-visible,
  footer a:focus-visible,
  footer button:focus-visible {
    outline-color: hsl(0 0% 100% / 0.5);
  }
  
  /* Remove default focus for mouse users */
  a:focus:not(:focus-visible),
  button:focus:not(:focus-visible) {
    outline: none;
  }
}

/* E) LINK FEEDBACK — Immediate interaction response */
@layer base {
  /* All links get pointer cursor */
  a {
    cursor: pointer;
  }
  
  /* Suppress mobile tap highlight for premium feel */
  a, button, [role="button"] {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Active/tap state for mobile - restrained opacity shift */
  a:active,
  button:active:not(:disabled) {
    opacity: 0.78;
  }
  
  /* Button press effect - subtle scale for tactile feedback */
  button:active:not(:disabled),
  [role="button"]:active:not(:disabled) {
    transform: scale(0.98);
  }
}

/* F) HEADLINE ORPHAN PREVENTION — Controlled measure for premium line breaks */
@layer components {
  /* Marketing section headlines - prevent single-word orphans */
  .headline-measure {
    max-width: 90%;
  }
  
  @media (min-width: 768px) {
    .headline-measure {
      max-width: 640px;
    }
  }
}

/* G) FONT LOADING STABILITY — Prevent layout shift */
@layer base {
  /* System font stack with font-display swap for custom fonts if added */
  @font-face {
    font-family: 'SF Pro Text';
    src: local('SF Pro Text'), local('-apple-system'), local('BlinkMacSystemFont');
    font-display: swap;
  }
}

@layer utilities {
  /* ═══════════════════════════════════════════════════════════════════════════
     iOS SAFARI VIEWPORT UTILITIES — LOCKED
     
     These utilities ensure full viewport coverage on iOS Safari with
     dynamic viewport height support and safe-area handling.
     ═══════════════════════════════════════════════════════════════════════════ */
  
  /* Full dynamic viewport height - iOS Safari compatible */
  .min-h-dvh {
    min-height: 100vh;
    min-height: 100dvh;
  }

  /* Safe area bottom padding for notched devices */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Content fade - opacity only, 150ms */
  .animate-content-fade {
    animation: contentFade 0.15s ease-out forwards;
  }

  @keyframes contentFade {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Button active state - brief opacity reduction, instant feedback */
  .btn-active {
    @apply active:opacity-85 active:transition-opacity active:duration-75;
  }

  /* Global focus visible for dark surfaces */
  [data-surface="dark"] *:focus-visible {
    outline: 1px solid hsl(0 0% 100% / 0.4) !important;
    outline-offset: 2px;
  }

  /* Global transition utility - locked duration */
  .transition-interaction {
    @apply transition-all duration-150 ease-out;
  }
}
